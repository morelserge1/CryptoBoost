import{r as e}from"./ui-Cl6vEefb.js";import{u as t,s,t as a}from"./index-YTWrWh3g.js";import"./vendor-DZS5dBEv.js";import"./supabase-Cx4a92Ep.js";const n=()=>{const{user:n}=t();return e.useEffect(()=>{if(!n)return;const e=s.channel("investment_updates").on("postgres_changes",{event:"UPDATE",schema:"public",table:"investments",filter:`user_email=eq.${n.email}`},e=>{const{new:t,old:s}=e;"pending"===s.status&&"approved"===t.status?a({title:"🚀 Investissement Approuvé!",description:`Votre ${t.plan_name} est maintenant actif.`,duration:5e3}):"pending"===s.status&&"rejected"===t.status&&a({title:"❌ Investissement Rejeté",description:`Votre ${t.plan_name} a été rejeté.`,duration:5e3})}).subscribe(),t=s.channel("deposit_updates").on("postgres_changes",{event:"UPDATE",schema:"public",table:"deposits",filter:`user_email=eq.${n.email}`},e=>{const{new:t,old:s}=e;"pending"===s.status&&"approved"===t.status?a({title:"✅ Dépôt Approuvé!",description:`Votre dépôt de ${t.amount}€ a été validé.`,duration:5e3}):"pending"===s.status&&"rejected"===t.status&&a({title:"❌ Dépôt Rejeté",description:`Votre dépôt de ${t.amount}€ a été rejeté.`,duration:5e3})}).subscribe(),i=s.channel("withdrawal_updates").on("postgres_changes",{event:"UPDATE",schema:"public",table:"withdrawals",filter:`user_email=eq.${n.email}`},e=>{const{new:t,old:s}=e;"pending"===s.status&&"approved"===t.status?a({title:"💰 Retrait Approuvé!",description:`Votre retrait de ${t.amount}€ a été traité.`,duration:5e3}):"pending"===s.status&&"rejected"===t.status&&a({title:"❌ Retrait Rejeté",description:`Votre retrait de ${t.amount}€ a été rejeté.`,duration:5e3})}).subscribe();return()=>{e.unsubscribe(),t.unsubscribe(),i.unsubscribe()}},[n]),null};export{n as default};
